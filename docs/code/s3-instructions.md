## 1. Установка

Для доступа к S3 используем AWS Python SDK в виде библиотеки boto3 
```sh
pip install boto3
```
Библиотека умеет работать со многими сервисами AWS и совместимыми, не только S3, но в данный момент нам это не важно.

## 2. Настройка

Сервис Yandex Cloud Object Storage является API-совместимым с AWS S3, т.е. все библиотеки, утилиты и сторонние программы для AWS S3 будут работать с Object Storage (если позволяют выбрать "точку подключения" - endpoint).
Тут документация от Яндекс - https://yandex.cloud/ru/docs/storage/tools/boto

> ### Важно
> Отличия конфигурации в нашем случае от документации только лишь в том, что конкретно для доступа к бакету проекта мы создаем и используем отдельный профиль. Если у вас раньше не было конфига `~/.aws/credentials`, то вам без разницы, а если был, то новый профиль не будет конфликтовать с существующими. 

Итого, нужно в файл `~/.aws/credentials` добавить новый раздел ("профиль") вот так:
```
[hse-ai24-team22]
  aws_access_key_id = <идентификатор_статического_ключа>
  aws_secret_access_key = <секретный_ключ>
```

### Где взять ключи
Следуя лучшим практикам, ключи никогда не сохраняются в репозиториях, а распространяются по сторонним каналам. В нашем случае - это сервис [Yandex Cloud Lockbox](https://yandex.cloud/ru/docs/lockbox/quickstart)
В нем создан "секрет", где сохранены "идентификатор_статического_ключа" и "секретный_ключ". С секретами в Lockbox тоже можно работать программно, но нам пока не надо. 

От вас требуется сообщить учетные записи (Яндекс ID), для которых открыть доступ.
Секрет будет ждать вас тут - https://console.yandex.cloud/folders/b1gsm28gekk8gv2u8j3r/lockbox/secrets

## 3. Как пользоваться
### Сложный путь
В принципе настройки ключей и [документации к Boto3](https://boto3.amazonaws.com/v1/documentation/api/latest/index.html) может хватить.

### Простой путь
1. обновить локальную ветку `main`
```sh
git switch main && git pull
```
Появится файл `code/datasets/utils.py` - модуль вспомогательных утилит для нашего проекта. 

2. в корне проекта выполнить
```sh
pip install .
```

3. После чего будет работать
```python
from datasets.utils import upload_file, download_file
```
или
```python
from datasets import utils
```

Там пока только две полезные функции - `upload_file` и `download_file` для загрузки/скачивания с Object Storage. Функции документированные, надеюсь, будет понятно. Обращайтесь, если что.

